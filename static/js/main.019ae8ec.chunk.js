(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),i=n.n(c),o=(n(77),n(18)),s=n.n(o),l=n(24),u=n(16),d=n(133),j=n(134),h=n(143),p=n(131),b=Object(p.a)((function(){return{mapContainer:{width:"100%",height:"100vh"}}})),O=n(3),v={center:[-33.448,-70.669],onClick:void 0};function f(e){var t=e.onClick;return Object(d.a)({click:function(e){var n=e.latlng,r=n.lat,a=n.lng;null===t||void 0===t||t({latitude:r,longitude:a})}}),null}function x(e){var t=e.center,n=e.onClick,r=b();return Object(O.jsxs)(j.a,{id:"map",center:t,zoom:4,className:r.mapContainer,children:[Object(O.jsx)(h.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(O.jsx)(f,{onClick:n})]})}x.defaultProps=v;var g=x,m=n(142),w=n(139),C=n(141),y=n(135),k=n(137),N=n(140),W=n(105),I=n(61),S=n.n(I),z=n(60),P=n.n(z),R=n(138),B=Object(p.a)((function(e){return{dialogTitle:{padding:e.spacing(2)},dialogPaper:{minHeight:290},dialogContent:{display:"flex",alignItems:"center",justifyContent:"center"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},grid:{textAlign:"center"},errorIcon:{fontSize:80}}})),T={loading:!1,weather:void 0,error:void 0,onClose:void 0,onRetry:void 0};function E(e){var t=e.open,n=e.loading,r=e.weather,a=e.error,c=e.onClose,i=e.onRetry,o=B();return Object(O.jsxs)(m.a,{open:t,onClose:c,maxWidth:"xs",fullWidth:!0,classes:{paper:o.dialogPaper},children:[Object(O.jsxs)(w.a,{disableTypography:!0,className:o.dialogTitle,children:[Object(O.jsx)(W.a,{variant:"h6",children:"Current Weather"}),Object(O.jsx)(N.a,{className:o.closeButton,onClick:c,children:Object(O.jsx)(S.a,{})})]}),Object(O.jsx)(C.a,{className:o.dialogContent,children:n?Object(O.jsx)(y.a,{size:80}):a?Object(O.jsxs)(k.a,{container:!0,direction:"column",alignItems:"center",spacing:2,children:[Object(O.jsx)(k.a,{item:!0,children:Object(O.jsx)(P.a,{color:"error",className:o.errorIcon})}),Object(O.jsx)(k.a,{item:!0,children:Object(O.jsx)(W.a,{variant:"h5",children:"Oops! Something went wrong"})}),Object(O.jsx)(k.a,{item:!0,children:Object(O.jsx)(R.a,{variant:"contained",color:"primary",onClick:i,children:"Retry"})})]}):Object(O.jsxs)(k.a,{container:!0,direction:"column",alignItems:"center",className:o.grid,children:[Object(O.jsx)(k.a,{item:!0,children:Object(O.jsxs)(W.a,{variant:"h4",children:[null===r||void 0===r?void 0:r.current.temp,"\xb0"]})}),Object(O.jsx)(k.a,{item:!0,children:Object(O.jsx)("img",{alt:"icon",src:"http://openweathermap.org/img/wn/".concat(null===r||void 0===r?void 0:r.current.weather[0].icon,"@2x.png")})}),Object(O.jsxs)(k.a,{item:!0,children:[Object(O.jsx)(W.a,{variant:"h6",children:null===r||void 0===r?void 0:r.timezone}),Object(O.jsx)(W.a,{variant:"h5",children:null===r||void 0===r?void 0:r.current.weather[0].description})]})]})})]})}E.defaultProps=T;var J=E,M=n(62),A=n(63),H=n(64),q=n.n(H),D=new(function(){function e(){Object(M.a)(this,e)}return Object(A.a)(e,[{key:"fetchWeather",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/api/weather?latitude=".concat(t,"&longitude=").concat(n),e.next=3,q.a.get(r);case 3:return a=e.sent,c=a.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),F=Object(r.createContext)({});function G(e){var t=e.children,n=Object(r.useState)({fetchWeather:function(e,t){return c.apply(this,arguments)}}),a=Object(u.a)(n,1)[0];function c(){return(c=Object(l.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.fetchWeather(t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsx)(F.Provider,{value:a,children:t})}var K=n(28);var L={open:!1,loading:!1,weather:void 0,error:void 0};function Q(){var e=function(e){var t=Object(r.useState)(e),n=Object(u.a)(t,2),a=n[0],c=n[1];return[a,Object(r.useCallback)((function(e){c((function(t){return Object(K.a)(Object(K.a)({},t),e)}))}),[])]}(L),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useRef)(),i=Object(r.useContext)(F).fetchWeather;function o(e){return d.apply(this,arguments)}function d(){return(d=Object(l.a)(s.a.mark((function e(t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({open:!0,loading:!0}),e.prev=1,n=t.latitude,r=t.longitude,e.next=5,i(n,r);case 5:c=e.sent,a({loading:!1,weather:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({loading:!1,error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(O.jsxs)("div",{id:"app",children:[Object(O.jsx)(g,{onClick:function(e){c.current=e,o(e)}}),Object(O.jsx)(J,{open:n.open,loading:n.loading,weather:n.weather,error:n.error,onClose:function(){a({open:!1})},onRetry:function(){if(!c.current)throw new Error("No coordinates have been selected yet");o(c.current)}})]})}i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(G,{children:Object(O.jsx)(Q,{})})}),document.getElementById("root"))},77:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.019ae8ec.chunk.js.map